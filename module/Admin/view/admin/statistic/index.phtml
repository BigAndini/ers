<?php
/* pizza would be really nice */

$title = 'ERS Statistics';
$this->headTitle($title);
?>
<h1><?php echo $this->escapeHtml($title); ?></h1>

<div class="row">
    <div class="col-lg-4">
        <h2>Orders</h2>
        <?php 
        $totalsum = 0;
        $transfersum = 0;
        foreach($orders as $order):
            $totalsum += $order->getPrice();
            $transfersum += $order->getSum();
        endforeach;
        ?>
        <dl>
            <dt>count</dt>
            <dd><?php echo count($orders); ?></dd>
            <dt>total sum</dt>
            <dd>
                <?php echo $this->currencyFormat($totalsum, 'EUR', null, 'de_DE'); ?>
            </dd>
            <dt>total sum (including payment fees)</dt>
            <dd>
                <?php echo $this->currencyFormat($transfersum, 'EUR', null, 'de_DE'); ?>
            </dd>
        </dl>
    </div>
    <div class="col-lg-4">
        <h2>Product Variants</h2>
        <?php foreach($variants as $variant): ?>
            <h3>
                <?php if($variant->getStatsname() != ''):
                    echo $variant->getStatsname();
                else:
                    echo $variant->getName();
                endif; ?>
            </h3>
            <table class="table">
            <?php foreach($variant->getProductVariantValues() as $value): ?>
                <tr>
                    <th><?php echo $value->getValue(); ?></th>
                    <td><?php echo count($value->getItemVariants()); ?></td>
                </tr>
            <?php endforeach; ?>
            </table>
        <?php endforeach; ?>
    </div>
    <div class="col-lg-4">
        <h2>Participants</h2>
        <dl>
            <dt>count</dt>
            <dd><?php echo count($participants); ?></dd>
        </dl>
    </div>
</div>